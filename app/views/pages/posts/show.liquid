---
slug: posts/:slug
---
{% liquid
  function current_profile = 'lib/current_profile', user_id: context.current_user.id, required: false

  assign post_id = context.params.slug | split: '-' | last
  function post = 'lib/queries/posts/find', id: post_id

  comment
    Redirect the page if we have a newer slug.
  endcomment
  if post.current_slug and post.current_slug != context.params.slug
    assign redirect_path = '/posts/' | append: post.current_slug
    redirect_to redirect_path, status: 301
  endif

  include 'lib/present_or_404', property: post.id

  include 'theme/simple/posts/show', root_post: post
%}
